<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/header :: header">

    <title>유저 등록</title>
</head>
<body>

<body-header th:replace="fragments/bodyHeader :: bodyHeader" />

<header class="masthead bg-primary text-white text-center">
    <div class="container d-flex align-items-center flex-column">
        <!-- Masthead Avatar Image-->
        <img class="mb-4 col-3" src="/assets/img/library.png" alt="..."/>

        <div class="container">
            <div class="pb-2 text-center">
                <h2>회원 가입</h2>
            </div>

            <form action="" th:action th:object="${user}" method="post" class="col-7 mx-auto">

                <div th:if="${#fields.hasGlobalErrors()}">
                    <p class="field-error field-errorText" th:each="err : ${#fields.globalErrors()}"
                       th:text="${err}">전체 오류 메시지</p>
                </div>

                <div class="mb-2">
                    <label for="loginId" class="mb-1 label-text">로그인 ID</label>
                    <input type="text" id="loginId" th:field="*{userIdentity}" class="form-control"
                           th:errorclass="field-error">
                    <div class="field-error" th:errors="*{userIdentity}" />
                </div>

                <div class="mb-2">
                    <label for="password" class="mb-1 label-text">비밀번호</label>
                    <input type="password" id="password" th:field="*{password}"
                           class="form-control"
                           th:errorclass="field-error">
                    <div class="field-error" th:errors="*{password}" />
                </div>

                <div class="mb-2">
                    <label for="passwordCheck"th:for="passwordCheck" class="mb-1 label-text">비밀번호 확인</label>
                    <input type="password" id="passwordCheck" th:field="*{passwordCheck}"
                           class="form-control mb-1" onchange="test()"
                           th:errorclass="field-error">
                    <div class="field-error" th:errors="*{passwordCheck}" />
                    <span id="same" />
                </div>

                <div class="mb-2">
                    <label for="name" class="mb-1 label-text">이름</label>
                    <input type="text" id="name" th:field="*{username}" class="form-control"
                           th:errorclass="field-error">
                    <div class="field-error" th:errors="*{username}" />
                </div>

                <div class="mb-2">
                    <label for="email" class="mb-1 label-text">email</label>
                    <input type="email" id="email" th:field="*{email}" class="form-control"
                           th:errorclass="field-error">
                    <div class="field-error" th:errors="*{email}" />
                </div>

                <hr class="my-4">
                <div class="row">
                    <div class="col">
                        <button class="w-100 btn btn-secondary btn-lg" type="submit">회원가입</button>
                    </div>
                    <div class="col">
                        <button class="w-100 btn btn-secondary btn-lg"
                                onclick="location.href='items.html'"
                                th:onclick="|location.href='@{/}'|"
                                type="button">취소</button>
                    </div>
                </div>
            </form>
        </div> <!-- /container -->


        <!-- Icon Divider-->
        <div class="divider-custom divider-light">
            <div class="divider-custom-line"></div>
            <div class="divider-custom-icon"><i class="fas fa-star"></i></div>
            <div class="divider-custom-line"></div>
        </div>
        <!-- Masthead Subheading-->

    </div>
</header>

<footer th:replace="fragments/footer :: footer" />
</body>

<!-- 비밀번호 이중체크 -->
<script type="text/javascript">
    function test() {
        var p1 = document.getElementById('password').value;
        var p2 = document.getElementById('passwordCheck').value;
        if ( p1 != p2) {
            document.getElementById('same').innerText='비밀번호가 일치하지 않습니다.';
            // document.getElementById('same').style.color='red';
            document.getElementById('same').className='label-text text-danger bg-secondary my-1';
        }
        else {
            document.getElementById('same').innerText='비밀번호가 일치합니다.';
            // document.getElementById('same').style.color='black';
            document.getElementById('same').className='label-text text-info bg-secondary my-1';
        }
    }
</script>

<!-- Bootstrap core JS-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<!-- Core theme JS-->
<script src="/js/scripts.js"></script>
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<!-- * *                               SB Forms JS                               * *-->
<!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>


</html>
